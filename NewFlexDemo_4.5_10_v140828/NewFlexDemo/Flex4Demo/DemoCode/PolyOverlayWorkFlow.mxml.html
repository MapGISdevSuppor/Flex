<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>PolyOverlayWorkFlow.mxml</title>
<link rel="stylesheet" type="text/css" href="../../SourceStyles.css"/>
</head>

<body><pre><span class="MXMLProcessing_Instruction">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="MXMLComponent_Tag">&lt;s:Application</span><span class="MXMLDefault_Text"> xmlns:fx="</span><span class="MXMLString">http://ns.adobe.com/mxml/2009</span><span class="MXMLDefault_Text">"
               xmlns:s="</span><span class="MXMLString">library://ns.adobe.com/flex/spark</span><span class="MXMLDefault_Text">"
               xmlns:mx="</span><span class="MXMLString">library://ns.adobe.com/flex/mx</span><span class="MXMLDefault_Text">"
               xmlns:map="</span><span class="MXMLString">zdims.map.*</span><span class="MXMLDefault_Text">"
               minWidth="</span><span class="MXMLString">955</span><span class="MXMLDefault_Text">" minHeight="</span><span class="MXMLString">600</span><span class="MXMLDefault_Text">" initialize="</span><span class="ActionScriptDefault_Text">application1_initializeHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">" xmlns:drawing="</span><span class="MXMLString">zdims.drawing.*</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;fx:Style</span><span class="MXMLDefault_Text"> source="</span><span class="MXMLString">css/windowstyle.css</span><span class="MXMLDefault_Text">"</span><span class="MXMLSpecial_Tag">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/fx:Style&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;fx:Script&gt;</span>
        &lt;![CDATA[
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">Mapgis7</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WebService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BasLib</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CGdbInfo</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">Mapgis7</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WebService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BasLib</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CLayerAccessInfo</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">Mapgis7</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WebService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BasLib</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CLayerInfo</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">Mapgis7</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WebService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BasLib</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">COpenLayer</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">Mapgis7</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WebService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BasLib</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">COperResult</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">Mapgis7</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WebService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BasLib</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">EXClsType</span>;
            
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">config</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ServerIP</span>;
            
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">controls</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Alert</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlexEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">messaging</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">messages</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">HTTPRequestMessage</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FaultEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ResultEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">http</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">HTTPService</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ObjectProxy</span>;
            
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">utilEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ReadURLEvent</span>;
            
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">zdims</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">drawing</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CoordinateType</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">zdims</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">drawing</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IMSPolygon</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">zdims</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">VectorLayerBase</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">zdims</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">VectorLayerEx</span>;
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">Overflag</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">VecAddress</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">TileAddress</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">viewConfig</span>:<span class="ActionScriptDefault_Text">ServerIP</span>;
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">clipTimer</span>:<span class="ActionScriptDefault_Text">Timer</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Timer</span><span class="ActionScriptBracket/Brace">(</span>10<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">timer</span>:<span class="ActionScriptDefault_Text">Timer</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">j</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptOperator">=</span>10;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">enableProbar</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;  
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gdbName</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"TEST080601"</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gdbSvr</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"MapGisLocal"</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">svrAddr</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"http://127.0.0.1:6163/igs/rest/ims/relayhandler"</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span>  <span class="ActionScriptDefault_Text">vLayer</span>:<span class="ActionScriptDefault_Text">VectorLayerEx</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">polygon</span>:<span class="ActionScriptDefault_Text">IMSPolygon</span>;
            
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">application1_initializeHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">FlexEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ServerIP</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapConfig1</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ReadURLEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">READ_COMPLETE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">TilereadURLCompelte</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">//获取服务地址
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">TilereadURLCompelte</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ReadURLEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">TileAddress</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TileURL</span>;
                <span class="ActionScriptDefault_Text">VecAddress</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vectorURL</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">tilelayer</span><span class="ActionScriptOperator">&amp;&amp;</span><span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">tile2dName</span><span class="ActionScriptOperator">&amp;&amp;</span><span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TileURL</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">tilelayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hdfName</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">tile2dName</span>;
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">tilelayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serverAddress</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TileURL</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mapDoc</span><span class="ActionScriptOperator">&amp;&amp;</span><span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vectorURL</span><span class="ActionScriptOperator">&amp;&amp;</span><span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vectorMapdocName</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapDoc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapDocName</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vectorMapdocName</span>;
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapDoc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serverAddress</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">viewConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vectorURL</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">refresh</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">//叠加分析
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">AnalyseOverLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                
                <span class="ActionScriptComment">//设置原始进度条不可见
</span>                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">enableProgressBar</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptComment">//判断是否存在已裁减分析的图层，如果有，就在地图上移除
</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">vLayer</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeElement</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">vLayer</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptComment">//设置裁剪范围的圆形图形为不可见
</span>                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
                
                <span class="ActionScriptComment">//加载进度条
</span>                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">progressBar</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">printView</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">/</span>2<span class="ActionScriptOperator">-</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">progressBar</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">/</span>2;
                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">progressBar</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">printView</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">/</span>2<span class="ActionScriptOperator">-</span>23;
                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">progressBar</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptDefault_Text">playProgressBar</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">clipTimer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Timer</span><span class="ActionScriptBracket/Brace">(</span>1000<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">clipTimer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">TimerEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TIMER</span><span class="ActionScriptOperator">,</span><span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>:<span class="ActionScriptDefault_Text">TimerEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">onTimer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">url</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">clipTimer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">start</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">ConnByRest</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">url</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//获取某次空间分析操作进度情况 
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">httpService</span>:<span class="ActionScriptDefault_Text">HTTPService</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">HTTPService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">httpService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">method</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">HTTPRequestMessage</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GET_METHOD</span>;
                <span class="ActionScriptDefault_Text">httpService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">url</span>;
                <span class="ActionScriptDefault_Text">httpService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">resultFormat</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"object"</span>;
                <span class="ActionScriptDefault_Text">httpService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">requestTimeout</span><span class="ActionScriptOperator">=</span>500;
                <span class="ActionScriptDefault_Text">httpService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">RESULT</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">onResult</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">httpService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FaultEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FAULT</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">FaultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
                <span class="ActionScriptBracket/Brace">{</span>                    
                    <span class="ActionScriptDefault_Text">Alert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"调用工作流失败"</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">timer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stop</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">httpService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">send</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clipTimer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stop</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>    
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onResult</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//将添加的进度条设置为不可见，并添加原始的进度条
</span>                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">progressBar</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptDefault_Text">timer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stop</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">enableProbar</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"false"</span>;
                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Object</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flowResult</span>:<span class="ActionScriptDefault_Text">ObjectProxy</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlowResult</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ObjectProxy</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">results</span>:<span class="ActionScriptDefault_Text">ObjectProxy</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">flowResult</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">results</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ObjectProxy</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">paravalue</span>:<span class="ActionScriptDefault_Text">ObjectProxy</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">results</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ParaValue</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ObjectProxy</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">resultLayerName</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">paravalue</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Value</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">String</span>;<span class="ActionScriptComment">//获取结果图层名称
</span>                
                <span class="ActionScriptComment">//CGdbInfo gdb信息类 
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gdbinfo</span>:<span class="ActionScriptDefault_Text">CGdbInfo</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">CGdbInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">gdbinfo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GDBName</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">gdbName</span>;
                <span class="ActionScriptDefault_Text">gdbinfo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GDBSvrName</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">gdbSvr</span>;
                <span class="ActionScriptDefault_Text">gdbinfo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">User</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
                <span class="ActionScriptDefault_Text">gdbinfo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Password</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
                <span class="ActionScriptComment">//CLayerAccessInfo 图层访问信息类
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layerAccessInfo</span>:<span class="ActionScriptDefault_Text">CLayerAccessInfo</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">CLayerAccessInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">layerAccessInfo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GdbInfo</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">gdbinfo</span>;
                <span class="ActionScriptComment">//CLayerInfo图层信息类
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layerInfo</span>:<span class="ActionScriptDefault_Text">CLayerInfo</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">CLayerInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">layerInfo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">LayerDataName</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">resultLayerName</span>;
                <span class="ActionScriptDefault_Text">layerInfo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">LayerType</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">EXClsType</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SFeatureCls</span>;;
                <span class="ActionScriptDefault_Text">layerAccessInfo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">LayerInfoList</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">layerInfo</span>;
                <span class="ActionScriptDefault_Text">vLayer</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">VectorLayerEx</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">openLayer</span>:<span class="ActionScriptDefault_Text">COpenLayer</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">COpenLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">openLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">LayerAccessInfo</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">layerAccessInfo</span>;
                <span class="ActionScriptDefault_Text">vLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serverAddress</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">svrAddr</span>;
                <span class="ActionScriptDefault_Text">vLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">autoGetMapInfo</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptComment">//loadLayer()加载图层的方法
</span>                <span class="ActionScriptDefault_Text">vLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loadLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">openLayer</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">onSingleLayerLoad</span><span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">//加载图层回调函数    
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onSingleLayerLoad</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">rlt</span>:<span class="ActionScriptDefault_Text">COperResult</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">vLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">onLoadLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">rlt</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">OperResult</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">vLayer</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">refresh</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">//移除分析成功后的图层
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">clear_Layer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">vLayer</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeElement</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">vLayer</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">vLayer</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">//页面加载完成时添加两个叠加分析的矩形范围
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">init</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span>:<span class="ActionScriptDefault_Text">VectorLayerBase</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">IMSPolygon</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">CoordinateType</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Logic</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">graphicsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addGraphics</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addPoint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span>7498558.34345973<span class="ActionScriptOperator">,</span><span class="ActionScriptOperator">-</span>1006021.06275513<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addPoint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span>6502126.00268229<span class="ActionScriptOperator">,</span><span class="ActionScriptOperator">-</span>4118502.99605364<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addPoint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span>486200.384110001<span class="ActionScriptOperator">,</span><span class="ActionScriptOperator">-</span>2592519.78622136<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addPoint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span>1586005.61166703<span class="ActionScriptOperator">,</span><span class="ActionScriptOperator">-</span>1862583.50001372<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">beginFill</span><span class="ActionScriptBracket/Brace">(</span>0xFFFF66<span class="ActionScriptOperator">,</span>0.6<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">lineStyle</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptOperator">,</span>0x000000<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">polygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">draw</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">//计时器回调函数
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onTimer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">uid</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">e</span>:<span class="ActionScriptDefault_Text">TimerEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>    
                <span class="ActionScriptComment">//构建参数键值对
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">paraValues</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"srcInfo1:gdbp://MapGisLocal/TEST080601/sfcls/Hyld;"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"strGRegionXML:{Rings:[{Arcs:[{Dots:[{x:-7498558.34345973,y:-1006021.06275513},{x:-6502126.00268229,y:-4118502.99605364},{x:-486200.384110001,y:-2592519.78622136},{x:-1586005.61166703,y:-1862583.50001372}],ArcID:0}]}],GID:0};"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"desInfo:gdbp://MapGisLocal/TEST080601/sfcls/overlayByPolygonResult"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">random</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">";"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"radius:100;"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"inFormat:json;"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"attOptType:1;"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"infoOptType:1;"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"overType:1;"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"isCleanNode:false;"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"isLabelPnt:false;"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"isValidReg:false;"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"isReCalculate:true;"</span><span class="ActionScriptOperator">+</span>
                    <span class="ActionScriptString">"resultName:null"</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">url</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
                <span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span><span class="ActionScriptString">" http://127.0.0.1:6163/igs/rest/mrfws/execute/600237?paraValues="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">paraValues</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"&amp;f=xml&amp;isAsy=false&amp;r="</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">random</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">ConnByRest</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">url</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">initProBar</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span> 
                <span class="ActionScriptDefault_Text">timer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Timer</span><span class="ActionScriptBracket/Brace">(</span>10<span class="ActionScriptBracket/Brace">)</span>; 
                <span class="ActionScriptDefault_Text">timer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">TimerEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TIMER</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">timer_timer</span><span class="ActionScriptBracket/Brace">)</span>; 
            <span class="ActionScriptBracket/Brace">}</span> 
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">timer_timer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">evt</span>:<span class="ActionScriptDefault_Text">TimerEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span> 
                <span class="ActionScriptDefault_Text">runit</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span> 
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">resetProgressBar</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span> 
                <span class="ActionScriptDefault_Text">timer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">start</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                
                <span class="ActionScriptDefault_Text">progressBar</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setProgress</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptOperator">,</span> 100<span class="ActionScriptBracket/Brace">)</span>; 
            <span class="ActionScriptBracket/Brace">}</span> 
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">playProgressBar</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span> 
                <span class="ActionScriptDefault_Text">enableProbar</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
                <span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">=</span>0;
                <span class="ActionScriptDefault_Text">resetProgressBar</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; 
                <span class="ActionScriptDefault_Text">timer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">start</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; 
            <span class="ActionScriptBracket/Brace">}</span> 
            
            <span class="ActionScriptComment">//进度条begin        
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">runit</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">enableProbar</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">&lt;=</span>100<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>       
                        <span class="ActionScriptDefault_Text">progressBar</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setProgress</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">,</span>100<span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">progressBar</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"正在分析...."</span> ;
                        <span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">+=</span>1;      
                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">==</span>100<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">=</span>0;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span> 
            
        <span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/fx:Script&gt;</span>
    
    <span class="MXMLSpecial_Tag">&lt;fx:Declarations&gt;</span>
        <span class="MXMLComment">&lt;!--</span><span class="MXMLComment"> 将非可视元素（例如服务、值对象）放在此处 </span><span class="MXMLComment">--&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/fx:Declarations&gt;</span>
    
    <span class="MXMLComponent_Tag">&lt;s:controlBarContent&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:HGroup</span><span class="MXMLDefault_Text"> height="</span><span class="MXMLString">35</span><span class="MXMLDefault_Text">" verticalAlign="</span><span class="MXMLString">middle</span><span class="MXMLDefault_Text">" left="</span><span class="MXMLString">10</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>    
            <span class="MXMLComponent_Tag">&lt;s:Label</span><span class="MXMLDefault_Text">   text="</span><span class="MXMLString">黄色多边形范围与海洋陆地图层进行叠加分析</span><span class="MXMLDefault_Text">" fontFamily="</span><span class="MXMLString">宋体</span><span class="MXMLDefault_Text">" fontSize="</span><span class="MXMLString">14</span><span class="MXMLDefault_Text">"  fontWeight="</span><span class="MXMLString">bold</span><span class="MXMLDefault_Text">"  left="</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">" textAlign="</span><span class="MXMLString">left</span><span class="MXMLDefault_Text">" verticalAlign="</span><span class="MXMLString">middle</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;s:Button</span><span class="MXMLDefault_Text">  label="</span><span class="MXMLString">叠加分析</span><span class="MXMLDefault_Text">"  click="</span><span class="ActionScriptDefault_Text">AnalyseOverLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">" fontSize="</span><span class="MXMLString">13</span><span class="MXMLDefault_Text">" fontWeight="</span><span class="MXMLString">bold</span><span class="MXMLDefault_Text">" fontFamily="</span><span class="MXMLString">宋体</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;s:Button</span><span class="MXMLDefault_Text">  label="</span><span class="MXMLString">清除</span><span class="MXMLDefault_Text">" click="</span><span class="ActionScriptDefault_Text">clear_Layer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">" fontSize="</span><span class="MXMLString">13</span><span class="MXMLDefault_Text">" fontWeight="</span><span class="MXMLString">bold</span><span class="MXMLDefault_Text">" fontFamily="</span><span class="MXMLString">宋体</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/s:HGroup&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/s:controlBarContent&gt;</span>
    
    <span class="MXMLComponent_Tag">&lt;s:BorderContainer</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">printView</span><span class="MXMLDefault_Text">" x="</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">" y="</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"  borderColor="</span><span class="MXMLString">0xffffff</span><span class="MXMLDefault_Text">" borderWeight="</span><span class="MXMLString">1</span><span class="MXMLDefault_Text">" borderAlpha="</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
    <span class="MXMLComponent_Tag">&lt;map:IMSMap</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">mapContainer</span><span class="MXMLDefault_Text">" x="</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">" y="</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" 
                levelNum="</span><span class="MXMLString">7</span><span class="MXMLDefault_Text">" initShowLevel="</span><span class="MXMLString">2</span><span class="MXMLDefault_Text">" 
                restoreCenterX="</span><span class="MXMLString">1470733.354238</span><span class="MXMLDefault_Text">" restoreCenterY="</span><span class="MXMLString">62381.549275</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;map:TileLayerEx</span><span class="MXMLDefault_Text"> x="</span><span class="MXMLString">147</span><span class="MXMLDefault_Text">" y="</span><span class="MXMLString">31</span><span class="MXMLDefault_Text">" id="</span><span class="MXMLString">tilelayer</span><span class="MXMLDefault_Text">" autoGetMapInfo="</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/map:TileLayerEx&gt;</span>
        <span class="MXMLComponent_Tag">&lt;map:VectorMapDocEx</span><span class="MXMLDefault_Text"> x="</span><span class="MXMLString">245</span><span class="MXMLDefault_Text">" y="</span><span class="MXMLString">164</span><span class="MXMLDefault_Text">" id="</span><span class="MXMLString">mapDoc</span><span class="MXMLDefault_Text">" layerOpenCallBack="</span><span class="MXMLString">init</span><span class="MXMLDefault_Text">" autoGetMapInfo="</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">" display="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/map:VectorMapDocEx&gt;</span>
        <span class="MXMLComponent_Tag">&lt;drawing:GraphicsLayer</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">graphicsLayer</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/drawing:GraphicsLayer&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/map:IMSMap&gt;</span>
        
        <span class="MXMLComponent_Tag">&lt;mx:ProgressBar</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">progressBar</span><span class="MXMLDefault_Text">" 
                        mode="</span><span class="MXMLString">manual</span><span class="MXMLDefault_Text">"        
                        labelPlacement="</span><span class="MXMLString">center</span><span class="MXMLDefault_Text">"  
                        width="</span><span class="MXMLString">218</span><span class="MXMLDefault_Text">" 
                        height="</span><span class="MXMLString">16</span><span class="MXMLDefault_Text">" 
                        creationComplete="</span><span class="ActionScriptDefault_Text">initProBar</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;<span class="MXMLDefault_Text">"   
                        borderColor="</span><span class="MXMLString">#E3EEEE</span><span class="MXMLDefault_Text">" alpha="</span><span class="MXMLString">1.0</span><span class="MXMLDefault_Text">" visible="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"  </span><span class="MXMLComponent_Tag">/&gt;</span>  
    <span class="MXMLComponent_Tag">&lt;/s:BorderContainer&gt;</span>
    
<span class="MXMLComponent_Tag">&lt;/s:Application&gt;</span></pre></body>
</html>
